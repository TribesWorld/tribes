language: python
python:
- 2.7
sudo: required
services:
- docker
git:
  submodules: true
addons:
  apt:
    packages:
    - sshpass
before_install:
- docker build -t tribeswiki/wiki-service .
- docker run -itd --name tribes-service -p 5000:5000 tribeswiki/wiki-service
- docker ps -a
- docker logs tribes-service
install:
- echo 'install dependencies...'
script:
- echo 'Execute shell command...'
after_success:
- if [ "$TRAVIS_BRANCH" == "master" ]; then docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
  docker push tribeswiki/wiki-service; fi
- if [ "$TRAVIS_BRANCH" == "develop" ]; then tar -czf tribes.tgz *; export SSHPASS=$TEST_HOST_PASS;
  sshpass -e scp package.tgz $TEST_HOST_USER@$TEST_HOST:$TEST_HOST_PATH;
  fi
notifications:
  slack:
    rooms:
    - tribesworld:dzHBgVIhNFNIzILqXHeswFgt#tribes
env:
  global:
  - secure: Ismn+oj3lfvuA12gM95K1mMgWOKeRpT6VitXsMAuggzVfEjX2Uw4HQh9Wr4xQfj+APOEOvSZRJshp9+y08wXqR8AN4viBNxkD6xw5uo2VURzylydQFey6xmb0pnuuMNn4ZX8zqUp+vXBaSDQrtl+GOj4iiTwDA0B/JUFkudm0sdLR6BSuMQg1n5mlauWdQm0vnOUrc/H5II7k+AUXhN8z3n/Pzd7ROVPfBxHjCnYNq4f+jRkmGrr8nqEckmMS68wGphY22dXw31QS2glp1ZSnixeGC7/BBmiayI9Jvvdxg+MC4NUdhnbdRl+RBG5+tNgqLUf94x0mcfZT2l3LzJH8kWr6yVVEAonTfvQ0jWqCvHKPjK0kxTKg6dlnRQ/+vTQyvEVQHjY/Hoz47nDg2UFVtZBaqWQJx9YtHMrhAGQQP/uDxwIMqUxxaVyAsF6GUHq6QxjMC/WeGN8hTkGeh1bpUpB+bvdZ1TXab4AWJernwtkBzcJPE4yq4stdRYcSNvOPRRLbkPscIKQnZowXvQkU6fMTvbpsRVTLJRif7fwYRCiBX/SEW2ePrGKh3LSU4E6gL21u8g73Nzx9mCbdo86pKZHzg87tk3viUwWqqoNtTaY/UKvVfVEKzJZSWcPt5vypEyA1x4Dq+GD2iIIGDADguwccoAi0NKKPm9fuNEDx3o=
  - secure: vw7hGA6hGNYI2wxcf9gQTcbbIZRu4AWqBMA4y5Ze3cOF+0SpudoRV1AFuFkroNoolPlLEpyqLpvwo+harYGChGpSKKrulj761/NBo8yho3s/42WJGYwOmG0+bWUSf7MrJZc5dUb0D1Xd8It3KfXLZT9Wl8MFSv8Y0u2JRGgXvUbUAjEyp92KD4joLwOVfV846WNla3uNtXPM0KAhBtHvu8xD17HYkFldSF/co56GX/S3uunEkfQjBl75XjWWn+8NF0aqIrbG8GnefOgxqZlE+hTHvEB7d56zRj1ptOpNRtuMnNBwnS4XdI4As7tqdMqiETkXmjYsBhAaRyf5H5IqOWFtCDGGx+//ntp0LGNjiTzyWuXIUjqN5iUt/LVCj37MoIo67vMXevt298hkCpJSauBqroiPw2H3QjPOprovT96TYIVCCBO/RHfDjWJiwECqAkjPs3/FgBJYHSSOOse1xYu7Y07fZ/Su5tfT7l/+Rx9q2mD8U3nwqeLn6HfancddJ0ldh2F92Ek6ojBHXMsp+RXtZggsJpgZe9Ims0KOFO2irtI6zr1s0u4YbDD+B7s/hq9jMXtPTHjTxPT8err7ZlOflCngBhmGNW7OEtQQxNV2w6NOaYCpBogupgxxk76tlKyNY3WBjG74joHip2nvUnMg4OzdtW2Y7irqR905nRE=
  - secure: pTTiyPNNmMEEzqcc9nR0ZTyRL9WlFiDVJlNUrUHTs1X3wZbZqEdfJBJoa6ypG+G4KZFw7eoRJ3ItXHSlyrWpZ/tLDnV28l5jjkNoMnCPKiv+idaYM9OkKRe7S/eXaKHC4MNJaQrx6cytLA8T/ZXYWFzEsaP5wKI5V1kce3HCQMPA/uXa8jQnSQSFpRrnRk+bVL8nsdhWQ3j8RalTdAdt+GTAj02Ir/igfDsqI2IgtIiBYho1CQtcb69AdWTxfaugW5hbjAkLGBUV4Z4m68LHur2VehCHzDn8ZbcnFUiYvP+uJUUjefIFsTqxdAWcI7EuDqC+BmJ+7rm04ic72jdkCQKOJf7aJpUVFKTbatgwkoJPZD9aqutSyCjWc0Jde8kBYJtgk27jknT3cgi1g651cpo+oOgCRmUMQdPCg6EBjNl8iHNo4uSs5Kk5gg13tN2POwMjJvm7o2k/R7nWCx5I9xRQMi6Edr0EyNRu43idejehIG1uzgwaF4Sn+L+8uZ0H3Iv1hcOheZOuCnBhbsEN1TBnPsYU8356TTOBZxI5xs2opOyP8RPuy9vg/auyjFii+vXN3JxJLA51krYjPSm1I4KBiwM+mC8jrJ++vjq+hTRIqg6VBxlC8hj4ir0HaMquTS/cekM0v2ZOwVbYHpxK8Ouw3PMRni3fXaf9WDL3Cyk=
  - secure: mc8aexFy35pZmVEYhT9vnuv+QCJ8qkkmC3Kiv8a7fDQg6GbGt4wkH9uOqn8CXxFfwhzTtg2HmWbSLpZUXPrsQRMSkebjPODnaGzGhGZ/FIAiwlboOFYUTiKz0AeLLf9A1TpyHXn+eijMmyYXN1KJKFeniX5Dk21Wq8HdWQMXqS3FatlyARU9Ef00TyLFykk7NYDnBSsDIQfQS0PXO8RFxlggcYBlx/puLMiAiW/yOIMpW5ecm8YPTAR9zcOWrTTa6awA7AJuFJ8SJyPEu2wUNRdANtrP95QmHqZhaHt7Ss5wguyzbUZ5yE4APrHmecmmS+iOyy42Zxixs98HyQaSedPdzaaRhfCSd4gw5UEhiSA58mg7Lm8z0bwaPI7ThnNrrww2jYTANAc6frB+kingZuDNVu4epb8qPY+ZVdhbIRtidcfu5Qg+TSgEC83nOcACxr4gWrQHPiRyZLHfGl1E4NUD8ZNro/JDrYnt3BMI1Sf27Iro2TMehwZbUd0XE+ewEd1UO+UiNJS5PlCTLzxT+6jPtPyP5P+AM4VDJ/pVt3rlPCyZEFc5JSGHiyxeAi3O2OxpwHEG1TCy3K3ll6LGEqKbFU1xuFj1v9VnnbQaPmKJoImczj242Jb8HEruzL4ay7ZzNfthsQfe0idzAq0npTVB0rYfOLvIV7xDQkjSlQo=
